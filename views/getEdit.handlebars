<script>
  //預覽圖片
  function readURL(input) {
    if (input.files && input.files[0]) {
      var reader = new FileReader();

      reader.onload = function (e) {
        $('#avatar').attr('src', e.target.result);
      }

      reader.readAsDataURL(input.files[0]); // convert to base64 string
    }
  }
</script>

{{>messages}}
<div class="container py-5">
  <form action="/users/{{user.id}}/edit" method="POST" enctype="multipart/form-data">
    <div class="row" style="justify-content: space-evenly">
      <div class="col-md-4">
        <div class="form-group">
          <img src="{{user.avatar}}" alt="avatar" style="width: 250px;margin-bottom: 25px;"
            accept="image/gif, image/jpeg, image/png" id="avatar" />
        </div>

        <div class="form-group">
          <input type="file" class="form-control-file" id="avatar" name="avatar" onchange="readURL(this)">
        </div>
      </div>
      <div class="col-md-4">
        <div class="form-group">
          <label for="name">姓名:</label>
          <input type="text" class="form-control" name="name" id="name" value="{{user.name}}" required autofocus>
        </div>
        <div class="form-group">
          <label for="introduction">介紹</label>
          <textarea class="form-control" id="introduction" name="introduction"
            rows="15">{{user.introduction}}</textarea>
        </div>
        <button class="btn btn-primary mt-5" type="submit">儲存</button>
        <a href="/users/{{user.id}}/edit" class="btn btn-primary mt-5">取消</a>
      </div>
    </div>
  </form>
</div>